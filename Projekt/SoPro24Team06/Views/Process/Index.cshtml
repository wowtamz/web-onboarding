@model SoPro24Team06.ViewModels.ProcessListViewModel
@{
    ViewData["Title"] = "Vorgänge";
}

<body>
    <!-- Start: Banner Heading -->
    <section class="py-4 py-xl-5" style="padding: 32px 0;">
        <div class="container">
            <div class="text-white bg-dark border rounded border-0 p-4 p-md-5" style="background: linear-gradient(150deg, var(--bs-danger) 0%, rgb(245,165,182) 60%, white 100%, rgb(230, 29, 71) 100%), rgb(230, 29, 71);">
                <h2 class="fw-bold text-black mb-3">Vorgänge</h2>
                <p class="text-black mb-4" style="font-size: 20px;">Wähle einen beliebigen Prozess aus als Blaupause für um einen Vorgang zu kreieren.</p>
                <div class="my-3"><a class="btn btn-primary btn-lg me-2" role="button" 
                asp-controller="Process" asp-action="Start" style="background: rgb(204, 212, 217);border-style: none;">Vorgang starten</a></div>
            </div>
        </div>
    </section><!-- End: Banner Heading -->
    <div class="d-flex justify-content-between align-items-xxl-center">
        <div class="btn-toolbar">
            <div class="btn-group" role="group"><button class="btn btn-primary" type="button">Meine Vorgänge</button><button class="btn btn-primary" type="button">Alle Vorgänge</button><button class="btn btn-primary" type="button">Archivierte Vorgänge</button></div>
        </div>
        <div class="dropdown"><button class="btn btn-primary dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown" type="button" style="margin-bottom: 12px;">Sortierung&nbsp;</button>
            <div class="dropdown-menu"><a class="dropdown-item" href="#">Alle</a><a class="dropdown-item" href="#">Name</a><a class="dropdown-item" href="#">Fälligkeiten</a></div>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Beschreibung</th>
                    <th>Vertragstyp</th>
                    <th>Abteilung</th>
                    <th>Bezugsperson</th>
                    <th>Zieldatum</th>
                    <th>Aktionen</th>
                </tr>
            </thead>
            <tbody>
                @if (@Model != null)
                {
                    @foreach (var process in @Model.ProcessList)
                    {
                        var title = process.Title;
                        var description = process.Description;
                        var contract = process.ContractOfRefWorker.Label;
                        var department = process.DepartmentOfRefWorker.Name;
                        var worker = process.WorkerOfReference.FullName;
                        var due = process.DueDate.ToString();

                        <tr>
                            <td>@title</td>
                            <td>@description</td>
                            <td>@contract</td>
                            <td>@department</td>
                            <td>@worker</td>
                            <td>@due</td>
                            <td class="d-flex flex-row justify-content-evenly"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-box-arrow-up-left fs-4">
                                    <path fill-rule="evenodd" d="M7.364 3.5a.5.5 0 0 1 .5-.5H14.5A1.5 1.5 0 0 1 16 4.5v10a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 3 14.5V7.864a.5.5 0 1 1 1 0V14.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5v-10a.5.5 0 0 0-.5-.5H7.864a.5.5 0 0 1-.5-.5"></path>
                                    <path fill-rule="evenodd" d="M0 .5A.5.5 0 0 1 .5 0h5a.5.5 0 0 1 0 1H1.707l8.147 8.146a.5.5 0 0 1-.708.708L1 1.707V5.5a.5.5 0 0 1-1 0z"></path></svg>
                                <a asp-controller="Process" asp-action="Edit"><i class="far fa-edit" style="font-size: 20px;color: rgb(0,0,0);"></i></a>
                                

                                <form action="@Url.Action("Stop", "Process", new { id = process.Id})" method="post">
                                    @Html.AntiForgeryToken()
                                    <input type="hidden" name="_method" value="stop" />
                                    <button class="btn-close" type="submit" aria-label="Close"></button>
                                </form>
                            </td>
                        </tr>
                    }
                    if (@Model.ProcessList.Count == 0)
                    {
                        <tr>
                            <td colspan="7">Keine Vorgänge vorhanden</td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
</body>